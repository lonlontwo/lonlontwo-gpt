# 🐰 兔兔助理 (Bunny Assistant) 專案開發紀錄

本文件紀錄了兔兔助理 AI 聊天系統的開發過程、技術架構及功能說明，供日後維護與查閱。

## 📅 專案概況
- **定位**：嵌入式 AI 網站助理，支援自動開啟、知識庫學習及雲端化管理。
- **部署網址**：
  - 🌐 **前台 (聊天介面)**：https://lonlontwo-gpt.pages.dev/
  - ⚙️ **後台 (管理介面)**：https://lonlontwo-gpt.pages.dev/admin.html
- **核心技術**：
  - **前端**：Vanilla JS, CSS3 (RWD), HTML5。
  - **後端代理**：Cloudflare Workers (用於隱藏 API Key 並處理跨域請求)。
  - **資料存取**：Firebase Firestore (存放 API Key、模型參數及視覺設定)。
  - **AI 模型**：Groq API (Llama-3.3-70b-versatile)。

---

## 🚀 核心功能開發紀錄

### 1. 安全與 API 代理系統
- **問題**：最初 API Key 硬編碼在前端，具備安全風險。
- **方案**：實作 Cloudflare Worker (`functions/api/chat.js`) 作為代理伺服器。
- **優點**：前端完全看不到金鑰，且支援從 Firebase 動態讀取最新金鑰，無需重新部署即可更換 Model 或 Key。

### 2. 前端介面演進
- **視覺革命**：將原本側邊懸浮的按鈕改為「頁面中央常態式打開」的視窗，增強儀式感。
- **控制按鈕**：
  - **最大化/還原**：支援全螢幕聊天及桌機版滑鼠手動拉動邊框調整大小。
  - **智能關閉**：點擊後嘗試關閉視窗或返回上一頁，適合嵌入式場景。
- **RWD 優化**：針對手機版進行全螢幕適配，輸入框大小調整以符合行動端操作。

### 3. 高階後台管理系統 (Professional Admin)
- **視覺風格**：應要求將後台重新設計為「專業深色模式 (Dark/Orange Style)」。
- **分類管理**：使用 Tab 分頁系統，分為「專屬設置」、「API 金鑰」、「知識庫」。
- **特色功能**：
  - **知識庫 (RAG 小工具)**：可輸入多個 JS 或 TXT 網址，Worker 會自動抓取內容餵給 AI。
  - **頭像自定義**：支援即時預覽與雲端更換助理頭像。
  - **API 到期警戒**：設定到期日後，右上角會顯示倒數。若距離到期不足 10 天，會觸發**紅色加粗閃爍警戒**。

---

## 📁 檔案結構說明

| 路徑 | 說明 |
| --- | --- |
| `/index.html` | 前端主頁面，包含聊天視窗結構。 |
| `/style.css` | 包含所有視覺樣式、RWD 適配及縮放邏輯。 |
| `/script.js` | 前端邏輯，負責與 Firebase 同步設定、UI 控制及訊息處理。 |
| `/admin.html` | 專業黑橘風格後台，用於管理所有動態設定。 |
| `/functions/api/chat.js` | Cloudflare Worker 原始碼，負責 API 安全轉發與知識庫讀取。 |

---

## 🛠️ 維護手冊 (Q&A)

### Q: 如何更換 AI 的頭像或名稱？
A: 進入 `/admin.html` 的「專屬設置」分頁，輸入網址後點擊「儲存所有變更」即可，前台會即時同步。

### Q: 如何教 AI 新的知識？
A: 將您的資料寫成 `.txt` 或 `.js` 檔案並上傳到網路，將網址貼到後台「知識庫」分頁。AI 每次接收訊息時都會讀取該連結內容。

### Q: API Key 到期了怎麼辦？
A: 前往 [Groq Console](https://console.groq.com/keys) 申請新的 Key，在後台「API 金鑰」處貼上新 Key 並更新「到期日期」即可。

---

## 📝 備註
本專案目前同步更新於 `d:\網站內架設GPT` 及 `C 空間 (d:\工具搬遷\cloudflare-deploy)`。所有檔案版本皆已對齊。

**最後更新時間**：2026-01-07
